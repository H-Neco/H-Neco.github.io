<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Home on profile</title>
    <link>https://h-neco.github.io/</link>
    <description>Recent content in Home on profile</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 10 Feb 2018 18:56:13 -0500</lastBuildDate><atom:link href="https://h-neco.github.io/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Atlassian Deployment Triggers</title>
      <link>https://h-neco.github.io/projects/contributions/deploy-triggers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/projects/contributions/deploy-triggers/</guid>
      <description>Addressed pretty significant page load performance issue founde in larger deployments. Eliminates uses of intensive backend query, replacing it with an asynchronous API call against a lucene index. This change reduces page load from from 2+ minutes to nearly instant, with an incredibly responsive UI.</description>
    </item>
    
    <item>
      <title>Organically DevOps: Building Quality and Security into the Software Supply Chain at Liberty Mutual</title>
      <link>https://h-neco.github.io/publications/alldaydevops/</link>
      <pubDate>Tue, 08 Nov 2016 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/publications/alldaydevops/</guid>
      <description>This talk looked at Liberty Mutualâ€™s transformation to Continuous Integration, Continuous Delivery, and DevOps. For a large, heavily regulated industry, this task can not only be daunting, but viewed by many as impossible. Often, organizations try to reduce the friction through micro-fixes, but Eddieâ€™s team asked how to change the culture to reduce the friction and concluded with the following final points:
Donâ€™t mandate DevOps. Give employees the chance to master their discipline with examples to set and follow.</description>
    </item>
    
    <item>
      <title>Added Docker Build Status Badge to shields.io</title>
      <link>https://h-neco.github.io/projects/contributions/shields-docker/</link>
      <pubDate>Tue, 07 Jan 2020 17:09:26 +0000</pubDate>
      
      <guid>https://h-neco.github.io/projects/contributions/shields-docker/</guid>
      <description>Shields.io is a massive library of badges that can be inserted into project README&amp;rsquo;s or websites displaying various statuses (code coverage, health, version, etc).Â Support for docker was missing the current build health, and was a pretty trivial addition.</description>
    </item>
    
    <item>
      <title>Schema.org Structured Data documentation fixes</title>
      <link>https://h-neco.github.io/projects/contributions/schema-org/</link>
      <pubDate>Tue, 07 Jan 2020 17:08:21 +0000</pubDate>
      
      <guid>https://h-neco.github.io/projects/contributions/schema-org/</guid>
      <description>While adding Structured Data to a client&amp;rsquo;s website I found some example JSON that was invalid. Simple contribution to cleanup the user documentation providing syntactically valid JSON documents.</description>
    </item>
    
    <item>
      <title>multipassã§ã®ä»®æƒ³ãƒã‚·ãƒ³ã®ä½œæˆ/Dockerç’°å¢ƒæ§‹ç¯‰</title>
      <link>https://h-neco.github.io/blog/vm-multipass/</link>
      <pubDate>Wed, 20 Mar 2024 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/vm-multipass/</guid>
      <description>Intro ä»¥å‰ã¯ã€vagrant+virtualbox ã§ä»®æƒ³ãƒã‚·ãƒ³ã‚’ä½œæˆã—ã¦ã¾ã—ãŸãŒã€m2 mac ã«ç«¯æœ«ã‚’å¤‰ãˆãŸãŸã‚ã€multipass ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚
multipass ã¯ã€Ubuntu ã®ä»®æƒ³ãƒã‚·ãƒ³ã‚’ç°¡å˜ã«ä½œæˆã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚multipass ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ä»®æƒ³ãƒã‚·ãƒ³ã®ä½œæˆã€èµ·å‹•ã€åœæ­¢ã€å‰Šé™¤ãªã©ã®æ“ä½œã‚’ç°¡å˜ã«è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚
install $ brew install multipass ==&amp;gt; Installing Cask multipass ==&amp;gt; Running installer for multipass with sudo; the password may be necessary. Password: installer: Package name is multipass installer: Installing at base path / installer: The install was successful. ğŸº multipass was successfully installed! $ multipass version multipass 1.13.1+mac multipassd 1.13.1+mac åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰ è©³ã—ãã¯ä»¥ä¸‹å‚ç…§ https://multipass.run/docs/multipass-cli-client # æ–°è¦ä½œæˆ $ multipass launch -n test-vm-01 Launched: test-vm-01 # ç¢ºèª $ multipass list Name State IPv4 Image test-vm-01 Running 192.</description>
    </item>
    
    <item>
      <title>Trivy ã‚’ç”¨ã„ãŸã‚³ãƒ³ãƒ†ãƒŠImage,DockerFileã¸ã®è„†å¼±æ€§è¨ºæ–­</title>
      <link>https://h-neco.github.io/blog/docker-trivy/</link>
      <pubDate>Wed, 20 Mar 2024 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/docker-trivy/</guid>
      <description>Intro trivy ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®è„†å¼±æ€§è¨ºæ–­ã‚’è¡Œã†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚trivy ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã«å«ã¾ã‚Œã‚‹è„†å¼±æ€§ã‚’æ¤œå‡ºã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
docker ã®ç’°å¢ƒæ§‹ç¯‰ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ ç’°å¢ƒæ§‹ç¯‰ ä½œæ¥­ã®å¤§æ  Dockerfile ã«å¯¾ã—ã¦ trivy ã§è¨ºæ–­ã‚’è¡Œã„ã¾ã™ã€‚ å•é¡Œãªã‘ã‚Œã°ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã€trivy ã§å†åº¦ã‚¹ã‚­ãƒ£ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚ äº‹å‰æº–å‚™ é©å½“ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€Dockerfile ã‚’ä½œæˆã—ã¾ã™ã€‚ $ mkdir test $ vim test/Dockerfile FROM public.ecr.aws/nginx/nginx:1.25-alpine-slim EXPOSE 80/tcp è¨ºæ–­ DockerFile ã‚’ trivy ã§è¨ºæ–­ã—ã¾ã™ã€‚config ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ $ docker run --rm -v /var/run/docker.sock:/var/run/docker.sock -v $(pwd)/test:/workdir aquasec/trivy config --ignorefile .trivy/.trivyignore --severity HIGH,CRITICAL . 2024-03-20T13:16:35.209Z	INFO	Misconfiguration scanning is enabled 2024-03-20T13:16:35.210Z	INFO	Need to update the built-in policies 2024-03-20T13:16:35.211Z	INFO	Downloading the built-in policies... 46.13 KiB / 46.</description>
    </item>
    
    <item>
      <title>ChatGPT&#43;Mermaidã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ä½œæˆã™ã‚‹</title>
      <link>https://h-neco.github.io/blog/chatgpt-mermaid/</link>
      <pubDate>Wed, 21 Feb 2024 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/chatgpt-mermaid/</guid>
      <description>ChatGPT+Mermaid ã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ä½œæˆã™ã‚‹ ChatGPT ã¨ Mermaid ã‚’ä½¿ã£ã¦ã€ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚
ChatGPT ã¨ Mermaid ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ç°¡å˜ã«ä½œæˆã§ãã¾ã™ã€‚ChatGPT ã¯è‡ªç„¶ãªæ–‡ç« ç”Ÿæˆã«å„ªã‚Œã¦ãŠã‚Šã€Mermaid ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªè¨˜æ³•ã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’æç”»ã§ãã¾ã™ã€‚ã“ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚Šã€æ‰‹è»½ã«è¦ç´„ã‚„èª¬æ˜ã‚’è¡Œã„ãªãŒã‚‰ã€è¦–è¦šçš„ãªå›³ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚AI ãŒç”Ÿæˆã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’å…ƒã«ã€Mermaid ã‚’ä½¿ã£ã¦ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€è¤‡é›‘ãªãƒ—ãƒ­ã‚»ã‚¹ã‚„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’è¦–è¦šçš„ã«ç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚
ç°¡å˜ãªãƒãƒƒãƒã®å›³ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã®æŒ‡ç¤º ã€Œ&amp;ldquo;a&amp;quot;ãŒ&amp;quot;b&amp;quot;ã«å¯¾ã—ã¦&amp;quot;x&amp;quot;ã‚’éåŒæœŸã§è¦æ±‚ã—ã€ãã®å¾Œ&amp;quot;b&amp;quot;ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ç¶šã‘ã‚‹ã¨ã„ã†ãƒ—ãƒ­ã‚»ã‚¹ã‚’ Mermaid ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã§ä½œæˆã—ã¦ãã ã•ã„ã€‚çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€&amp;ldquo;a&amp;quot;ãŒçŠ¶æ…‹ç¢ºèªã‚’ç¶™ç¶šã—ã€çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã¯ã€&amp;ldquo;b&amp;quot;ãŒ&amp;quot;a&amp;quot;ã«ãã®æ—¨ã‚’é€šçŸ¥ã™ã‚‹ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚‚å›³ã«å«ã‚ã¦ãã ã•ã„ã€‚ã€
å›ç­” ã‚ãªãŸãŒæ±‚ã‚ã¦ã„ã‚‹ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã«ãªã‚Šã¾ã™ã€‚
mermaid sequenceDiagram participant a participant b a-&amp;gt;&amp;gt;b: xã‚’éåŒæœŸã§è¦æ±‚ loop çŠ¶æ…‹ç¢ºèª a-&amp;gt;&amp;gt;b: bã®çŠ¶æ…‹ã‚’ç¢ºèª opt å¤‰æ›´ãªã— a-&amp;gt;&amp;gt;a: çŠ¶æ…‹ã®ç¢ºèªã‚’ç¶™ç¶š end b--&amp;gt;&amp;gt;a: çŠ¶æ…‹å¤‰æ›´ã‚ã‚Š end ã“ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã¯ã€&amp;ldquo;a&amp;quot;ãŒ&amp;quot;b&amp;quot;ã«éåŒæœŸã§&amp;quot;x&amp;quot;ã‚’è¦æ±‚ã—ã€ãã®å¾Œ&amp;quot;b&amp;quot;ã®çŠ¶æ…‹ã‚’ç¢ºèªã—ç¶šã‘ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚&amp;ldquo;b&amp;quot;ã®çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚Œãªã„å ´åˆã€&amp;ldquo;a&amp;quot;ã¯çŠ¶æ…‹ã®ç¢ºèªã‚’ç¶šã‘ã¾ã™ã€‚ä¸€æ–¹ã€&amp;ldquo;b&amp;quot;ã®çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã€&amp;ldquo;b&amp;quot;ã¯&amp;quot;a&amp;quot;ã«ãã®æ—¨ã‚’é€šçŸ¥ã—ã¾ã™ã€‚</description>
    </item>
    
    <item>
      <title>CloudFrontFunctionã¨LambdaEdgeã®é•ã„</title>
      <link>https://h-neco.github.io/blog/aws-cloudfront-functions/</link>
      <pubDate>Fri, 21 Jul 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/aws-cloudfront-functions/</guid>
      <description>CloudFrontFunction / LambdaEdgeã«ã¤ã„ã¦ CloudFront Functionsã¯ã€Amazon CloudFrontã®ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚Šã€Lambda@Edgeã‚ˆã‚Šæ‰‹å‰ã§å‹•ä½œã—ã€ã‚·ãƒ³ãƒ—ãƒ«ãªå‡¦ç†ã‚’é«˜é€Ÿã‹ã¤å®‰ä¾¡ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚ŒãŸæ©Ÿèƒ½ã§ã™ã€‚å¾“æ¥ã®Lambda@Edgeã¯ã€CloudFrontã®ã‚¨ãƒƒã‚¸ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å‹•ä½œã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ã®AWS Lambdaé–¢æ•°ã‚’ä½œæˆã—ã¦ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ãŸã¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸€æ–¹ã€CloudFront Functionsã¯ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã§è»½é‡ã§ã‚ã‚Šã€Lambda@Edgeã‚ˆã‚Šã‚‚ä½ã„ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã¨é«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚
CloudFront Functionsã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚ˆã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¿‘ã„ã‚¨ãƒƒã‚¸ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã§ãã‚‹ãŸã‚ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ãŒçŸ­ç¸®ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ãŒå‘ä¸Šã—ã¾ã™ã€‚ã¾ãŸã€ã‚³ã‚¹ãƒˆé¢ã§ã‚‚Lambda@Edgeã‚ˆã‚Šã‚‚çµŒæ¸ˆçš„ã§ã‚ã‚‹ãŸã‚ã€ã‚·ãƒ³ãƒ—ãƒ«ãªå‡¦ç†ã«ã¯CloudFront FunctionsãŒé©ã—ã¦ã„ã¾ã™ã€‚
ã•ã‚‰ã«ã€CloudFront Functionsã¨Lambda@Edgeã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ä¾‹ãˆã°ã€ã‚·ãƒ³ãƒ—ãƒ«ãªå‡¦ç†ã‚„ãƒ˜ãƒƒãƒ€ãƒ¼ã®æ“ä½œã€URLã®æ›¸ãæ›ãˆãªã©ã®ã‚¿ã‚¹ã‚¯ã‚’CloudFront Functionsã§å‡¦ç†ã—ã€ã‚ˆã‚Šé«˜åº¦ãªå‡¦ç†ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã«ã¯Lambda@Edgeã§è¿½åŠ ã®å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚ ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã§é«˜é€Ÿãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ‡ãƒªãƒãƒªãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€AWSã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’æ´»ç”¨ã—ãŸã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é…ä¿¡ã‚’è¡Œã†éš›ã«ä¾¿åˆ©ã§ã™ã€‚
æ¯”è¼ƒè¡¨ ç‰¹å¾´ CloudFrontFunction Lambda@Edge ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚µãƒãƒ¼ãƒˆ JavaScript (ECMAScript 5.1æº–æ‹ ) Node.jsã€Python å®Ÿè¡Œå ´æ‰€ 218 ä»¥ä¸Šã® CloudFront ã‚¨ãƒƒã‚¸ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ 13 ã® CloudFront ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¨ãƒƒã‚¸ã‚­ãƒ£ãƒƒã‚·ãƒ¥ ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ CloudFront ãƒˆãƒªã‚¬ãƒ¼ ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã€ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã‚ªãƒªã‚¸ãƒ³ãƒ¬ã‚¹ãƒãƒ³ã‚¹ ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã€ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã‚ªãƒªã‚¸ãƒ³ãƒ¬ã‚¹ãƒãƒ³ã‚¹ æœ€å¤§å®Ÿè¡Œæ™‚é–“ 1 ãƒŸãƒªç§’æœªæº€ 5 ç§’ (ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒˆãƒªã‚¬ãƒ¼)ã€30 ç§’ (ã‚ªãƒªã‚¸ãƒ³ãƒˆãƒªã‚¬ãƒ¼) æœ€å¤§ãƒ¡ãƒ¢ãƒª 2 MB 128 MB (ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒˆãƒªã‚¬ãƒ¼)ã€10 GB (ã‚ªãƒªã‚¸ãƒ³ãƒˆãƒªã‚¬ãƒ¼) åˆè¨ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚µã‚¤ã‚º 10 KB 1 MB (ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒˆãƒªã‚¬ãƒ¼)ã€50 MB (ã‚ªãƒªã‚¸ãƒ³ãƒˆãƒªã‚¬ãƒ¼) ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ ãªã— ã‚ã‚Š ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹ ãªã— ã‚ã‚Š ãƒªã‚¯ã‚¨ã‚¹ãƒˆæœ¬æ–‡ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ ãªã— ã‚ã‚Š æ–™é‡‘ ç„¡æ–™åˆ©ç”¨æ ã‚ã‚Šã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«èª²é‡‘ã€‚ ç„¡æ–™åˆ©ç”¨æ ãªã—ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨é–¢æ•°ã®å®Ÿè¡Œæ™‚é–“ã”ã¨ã«èª²é‡‘ã€‚ ã¾ã¨ã‚ãƒ»è€ƒå¯Ÿ ã©ã¡ã‚‰ã«ã™ã‚‹ã‹ã¯å‡¦ç†æ™‚é–“ã‹éµã«ãªã‚Šãã†ã§ã™ã€‚</description>
    </item>
    
    <item>
      <title>dockerã§terraformã‚’å®Ÿè¡Œã™ã‚‹</title>
      <link>https://h-neco.github.io/blog/docker-terraform/</link>
      <pubDate>Mon, 10 Jul 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/docker-terraform/</guid>
      <description>ã¯ã˜ã‚ã« dockerã§terraformã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®docker-compose.ymlã‚’ä½œæˆã—ã¾ã—ãŸã€‚
ãƒ¡ãƒªãƒƒãƒˆ ç’°å¢ƒã®çµ±ä¸€ Dockerã¯ç’°å¢ƒã®çµ±ä¸€ã‚’å®¹æ˜“ã«ã—ã¾ã™ã€‚ç•°ãªã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚„OSã§ä½œæ¥­ã—ã¦ã„ã‚‹å ´åˆã§ã‚‚ã€Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§Terraformã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€å®Ÿè¡Œç’°å¢ƒã‚’ä¸€è²«ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† Terraformã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¯é‡è¦ã§ã™ã€‚ç•°ãªã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ç’°å¢ƒã§è¤‡æ•°ã®Terraformãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€Dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§Terraformã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ç’°å¢ƒã”ã¨ã«é©åˆ‡ãªTerraformãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ windowsãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯tfenvãŒä½¿ãˆãªã„ã®ã§ã€dockerã§ç®¡ç†ã™ã‚‹ã®ãŒè‰¯ã„ã‹ã¨æ€ã„ã¾ã™ã€‚ ã‚„ã‚‹ã“ã¨ ç’°å¢ƒå¤‰æ•°ã®ã‚»ãƒƒãƒˆ export AWS_DEFAULT_REGION=ap-northeast-1 export AWS_ACCESS_KEY_ID=xxxxxx export AWS_SECRET_ACCESS_KEY=xxxxxx docker-compose.ymlãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ version: &amp;#34;3&amp;#34; services: terraform: image: hashicorp/terraform:1.5.2 platform: linux/x86_64 volumes: - ~/.aws:/root/.aws - ./:/workdir working_dir: &amp;#34;/workdir&amp;#34; environment: - AWS_ACCESS_KEY_ID - AWS_SECRET_ACCESS_KEY - AWS_DEFAULT_REGION entrypoint: sh -c &amp;#39;terraform init &amp;amp;&amp;amp; terraform workspace select &amp;#34;${WORKSPACE}&amp;#34; 2&amp;gt;/dev/null || terraform workspace new &amp;#34;${WORKSPACE}&amp;#34; &amp;amp;&amp;amp; terraform &amp;#34;${COMMAND}&amp;#34;&amp;#39; terraformã®å®Ÿè¡Œ # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã®å®Ÿè¡Œ export WORKSPACE=&amp;#34;prod&amp;#34; COMMAND=&amp;#34;fmt&amp;#34; &amp;amp;&amp;amp; docker-compose -p ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå run --rm terraform # ã‚³ãƒ¼ãƒ‰æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã®å®Ÿè¡Œ export WORKSPACE=&amp;#34;prod&amp;#34; COMMAND=&amp;#34;validate&amp;#34; &amp;amp;&amp;amp; docker-compose -p ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå run --rm terraform # å®Ÿè¡Œè¨ˆç”»ã®ç¢ºèª export WORKSPACE=&amp;#34;prod&amp;#34; COMMAND=&amp;#34;plan&amp;#34; &amp;amp;&amp;amp; docker-compose -p ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå run --rm terraform </description>
    </item>
    
    <item>
      <title>codebuildæ§‹ç¯‰ã¨deployãƒ•ãƒ­ãƒ¼ã®æ•´å‚™</title>
      <link>https://h-neco.github.io/blog/aws-codebuild/</link>
      <pubDate>Tue, 27 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/aws-codebuild/</guid>
      <description>ã¯ã˜ã‚ã« BitBucketPipelinesã§imageã®pushã‚’è¡Œã£ã¦ã„ã¾ã—ãŸãŒã€cpuãŒãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¯¾å¿œã—ã¦ãŠã‚‰ãšã€x86_64ã®ã¿ã—ã‹å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã®pushã‚’CodeBuildã§è¡Œã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚ arm64ã§ECSã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚³ã‚¹ãƒˆãŒ20ï¼…è½ã¡ã€ä½¿ã„æ–¹ã«ã‚ˆã£ã¦ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹ã‚‰ã—ã„ã€‚
ä»Šã¾ã§ [BitBucketPipelines]ã€€â†’ã€€[awsECR] å¤‰æ›´å¾Œ [BitBucketPipelines]ã€€â†’ã€€[awsCodeBuild]ã€€â†’ã€€[awsECR] çµæœ ã‚³ã‚¹ãƒˆãŒ20%ãã‚‰ã„è½ã¡ãŸã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯ã¾ã ã‚µãƒ¼ãƒ“ã‚¹ã‚¤ãƒ³ã—ã¦ãªã„ãŸã‚åˆ†ã‹ã‚‰ãªã„
ã‚„ã‚‹ã“ã¨ CodeBuildã®è¨­å®š æ§‹æˆ /image/ä»¥ä¸‹ã®Dockerfileã‚’buildã—ã¦ECRã«pushã™ã‚‹ /image/ä»¥ä¸‹ã«buildspec.ymlã‚’é…ç½® Bitbucketã‹ã‚‰CodeBuildã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®scriptç”¨æ„ bitbuket-pipelines.ymlã®ä¿®æ­£ CodeBuildã®è¨­å®š data &amp;#34;aws_region&amp;#34; &amp;#34;this&amp;#34; {} resource &amp;#34;aws_codebuild_project&amp;#34; &amp;#34;ecr&amp;#34; { badge_enabled = false build_timeout = 20 // 20åˆ† concurrent_build_limit = 1 // ä¸¦åˆ—å®Ÿè¡Œæ•° encryption_key = &amp;#34;arn:aws:kms:${data.aws_region.this.name}:${data.aws_caller_identity.self.account_id}:alias/aws/s3&amp;#34; name = &amp;#34;ecr-build-${terraform.workspace}&amp;#34; project_visibility = &amp;#34;PRIVATE&amp;#34; queued_timeout = 480 service_role = aws_iam_role.codebuild_role.arn tags = { Environment = &amp;#34;${terraform.workspace}&amp;#34; Name = &amp;#34;ecr-build-${terraform.workspace}&amp;#34; } environment { compute_type = &amp;#34;BUILD_GENERAL1_SMALL&amp;#34; // 1vCPU, 3.</description>
    </item>
    
    <item>
      <title>EFS Burst Mode ã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¯æ¸‡å¯¾ç­–ãƒ¡ãƒ¢</title>
      <link>https://h-neco.github.io/blog/aws-efs/</link>
      <pubDate>Wed, 03 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/aws-efs/</guid>
      <description>Intro EFSãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¯æ¸‡å¯¾ç­–ãƒ¡ãƒ¢ EFSã‚’ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ä½¿ç”¨ã—ã¦ã„ã¦ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒä¸è¶³ã—ã¦ããŸãŸã‚ã€ç§ãŒå–ã£ãŸå¯¾ç­–ã‚’ãƒ¡ãƒ¢ã¨ã—ã¦æä¾›ã—ã¾ã™ã€‚ æŠ€è¡“è¦ç´  EFS aws EFSã®2ã¤ã®ãƒ¢ãƒ¼ãƒ‰ EFSã«ã¯2ã¤ã®ãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™: ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆæ±ç”¨ï¼‰ã¨ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã€‚
ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã¯ã€ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®é‡ã«åŸºã¥ã„ã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’è‡ªå‹•çš„ã«èª¿æ•´ã—ã€ä¸€æ™‚çš„ãªãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®å¢—åŠ ã«å¯¾å¿œã§ãã¾ã™ã€‚ãƒãƒ¼ã‚¹ãƒˆå¯èƒ½ãªå¸¯åŸŸå¹…ã¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®ä½¿ç”¨çŠ¶æ³ã«ã‚ˆã£ã¦ç•°ãªã‚Šã€æœ€ä½105 Mbpsã®ãƒãƒ¼ã‚¹ãƒˆãŒå¯èƒ½ã§ã™ã€‚ãŸã ã—ã€1ç§’ã‚ãŸã‚Šã®èª­ã¿å–ã‚Š/æ›¸ãè¾¼ã¿ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æ•°ã«ã¯åˆ¶é™ãŒã‚ã‚Šã€åˆ¶é™ã‚’è¶…ãˆã‚‹ã¨ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãŒä½ä¸‹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã€æœ€å°/æœ€å¤§/ãƒãƒ¼ã‚¹ãƒˆã€ãŠã‚ˆã³æ›¸ãè¾¼ã¿ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’è¨­å®šã§ãã¾ã™ã€‚èª­ã¿å–ã‚Šã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã¯æ›¸ãè¾¼ã¿ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®3å€ã§ã™ã€‚ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã¯ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã«åŸºã¥ã„ãŸè‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®è¨­å®šã«åŸºã¥ã„ã¦å¿…è¦ãªãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã«å¯¾å¿œã§ãã¾ã™ã€‚
ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆæ±ç”¨ï¼‰ã®æ³¨æ„äº‹é …ã¨å¯¾ç­– ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆæ±ç”¨ï¼‰ã®æ³¨æ„äº‹é …ã¨å¯¾ç­–
æ³¨æ„äº‹é …1: ãƒãƒ¼ã‚¹ãƒˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ
ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿å–ã‚Š/æ›¸ãè¾¼ã¿æ“ä½œã‹ã‚‰è“„ç©ã•ã‚ŒãŸã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚’æ¶ˆè²»ã—ã€NASä¸Šã®ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨çŠ¶æ³ã«åŸºã¥ã„ã¦ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚’è£œå……ã—ã¾ã™ã€‚ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®æœ€ä½é€Ÿåº¦ã¯105 Mbpsã§ã™ã€‚ãŸã ã—ã€ãƒãƒ¼ã‚¹ãƒˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒæ¯æ¸‡ã™ã‚‹ã¨ã€ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®æ€§èƒ½ãŒè‘—ã—ãä½ä¸‹ã—ã€ãƒã‚¦ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
ç¢ºèªæ–¹æ³•:
ãƒ¡ãƒˆãƒªãƒƒã‚¯å: BurstCreditBalance æœ€åˆã«2.3Tã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒæä¾›ã•ã‚Œã¾ã™ã€‚ ãƒãƒ¼ã‚¹ãƒˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã®æ¯æ¸‡ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®å¯¾ç­–ã‚’å–ã‚‹ã“ã¨ãŒã§ãã¾ã™:
ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã®å›å¾©ã‚’åŠ é€Ÿã™ã‚‹ãŸã‚ã«å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’é…ç½®ã™ã‚‹ã€‚ ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆã¦ä¸€å®šã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’ç¢ºä¿ã™ã‚‹ã€‚ æ³¨æ„äº‹é …2: ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶é™
ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã«ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®åˆ¶é™ãŒã‚ã‚Šã¾ã™ã€‚ ãƒªãƒ¼ãƒ‰ç”¨ã®æœ€å¤§IOPSã¯35,000ã€ãƒ©ã‚¤ãƒˆç”¨ã®æœ€å¤§IOPSã¯7,000ã§ã™ã€‚ ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®æœ€å¤§IOPSã‚’è¶…ãˆã‚‹ã¨ã€ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹ã—ã¾ã™ã€‚ã—ãŸãŒã£ã¦ã€é«˜ã„IOPSãŒå¿…è¦ãªå ´åˆã¯ã€ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚ ç¢ºèªæ–¹æ³•: ãƒ¡ãƒˆãƒªãƒƒã‚¯å: PercentIOLimit æ¤œè¨ã«åŸºã¥ãå¯¾ç­–ã®å–å¾— ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã«å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’é…ç½®ã—ã¦ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã®å›å¾©é€Ÿåº¦ã‚’åŠ é€Ÿã™ã‚‹ã¨ã„ã†æˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚
10GBã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã™ã‚‹è©¦ã¿ã€‚ ã‚³ã‚¹ãƒˆ: $3/æœˆ ã‚³ãƒãƒ³ãƒ‰: $ dd if=/dev/zero of=10GB_file_1 bs=10240k count=1000 ç¢ºèªæ–¹æ³•: ãƒ¡ãƒˆãƒªãƒƒã‚¯å: BurstCreditBalance é«˜ã„ã‚³ã‚¹ãƒˆã®ãŸã‚ã€ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã¯ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚ ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ 33(Mib/s) / æœ€å¤§èª­ã¿å–ã‚Šã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ 99(Mib/s) ã‚³ã‚¹ãƒˆ: $238/æœˆ ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ 15(Mib/s) / æœ€å¤§èª­ã¿å–ã‚Šã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ 45(Mib/s) ã‚³ã‚¹ãƒˆ: $108/æœˆ ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ 5(Mib/s) / æœ€å¤§èª­ã¿å–ã‚Šã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ 15(Mib/s) ã‚³ã‚¹ãƒˆ: $36/æœˆ </description>
    </item>
    
    <item>
      <title>Persisting an Attached EBS Volume to EC2 Using AWS CLI.</title>
      <link>https://h-neco.github.io/blog/aws-ec2-ebs-delete-on-termination/</link>
      <pubDate>Wed, 03 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/aws-ec2-ebs-delete-on-termination/</guid>
      <description>Intro ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒçµ‚äº†ã™ã‚‹ã¨ã€ã‚¢ã‚¿ãƒƒãƒã•ã‚ŒãŸEBSãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚‚å‰Šé™¤ã•ã‚Œã¾ã™ã€‚ã—ã‹ã—ã€AWS CLIã‚’ä½¿ç”¨ã—ã¦ã“ã‚Œã‚‰ã‚’æ°¸ç¶šåŒ–ã™ã‚‹æ–¹æ³•ã‚’æ¢ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ æŠ€è¡“è¦ç´  EC2/EBS ã‚³ãƒãƒ³ãƒ‰ ã‚¿ã‚°ã«ã‚ˆã£ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸå¯¾è±¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚ DeleteOnTerminationãŒtrueã§ã‚ã‚‹å ´åˆã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯æ°¸ç¶šåŒ–ã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ $ aws ec2 describe-instances --filters &amp;#34;Name=tag:Name,Values=xxxxx-prod-web01&amp;#34; | jq -r .Reservations[0].Instances[0].BlockDeviceMappings [ { &amp;#34;DeviceName&amp;#34;: &amp;#34;/dev/sda1&amp;#34;, &amp;#34;Ebs&amp;#34;: { &amp;#34;AttachTime&amp;#34;: &amp;#34;2023-04-18T04:59:14+00:00&amp;#34;, &amp;#34;DeleteOnTermination&amp;#34;: true, &amp;#34;Status&amp;#34;: &amp;#34;attached&amp;#34;, &amp;#34;VolumeId&amp;#34;: &amp;#34;vol-xxxxxxxxxxxx&amp;#34; } } ] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æº–å‚™ã—ã¾ã™ã€‚ DeleteOnTerminationã‚’falseã«è¨­å®šã—ã¾ã™ã€‚ $ vim mapping.json [ { &amp;#34;DeviceName&amp;#34;: &amp;#34;/dev/sda1&amp;#34;, &amp;#34;Ebs&amp;#34;: { &amp;#34;DeleteOnTermination&amp;#34;: false } } ] ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®è¨­å®šå¤‰æ›´ $ aws ec2 modify-instance-attribute --instance-id &amp;#34;i-xxxxxxxxxxxxxx&amp;#34; --block-device-mappings file://mapping.json ã‚¿ã‚°ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸå¯¾è±¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚ DeleteOnTerminationãŒfalseã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚ $ aws ec2 describe-instances --filters &amp;#34;Name=tag:Name,Values=xxxxx-prod-web01&amp;#34; | jq -r .</description>
    </item>
    
    <item>
      <title>OIDCã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ¢ (Git to AWS)</title>
      <link>https://h-neco.github.io/blog/cicd-oidc/</link>
      <pubDate>Wed, 26 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/cicd-oidc/</guid>
      <description>Intro ä»¥å‰ã¯ã€GitHubã‚„Bitbucketã‹ã‚‰å€‹äººã®AWSã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã‚’ç®¡ç†ã™ã‚‹ã®ãŒç…©é›‘ã«ãªã£ãŸãŸã‚ã€OIDCã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚
OIDC (OpenID Connect) ã¯ã€èªè¨¼ã¨èªå¯ã®ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã§ã™ã€‚OIDCã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€AWSã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’å®‰å…¨ã«ç®¡ç†ã—ã€èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä»‹ã—ã¦ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªã‚¢ã‚¯ã‚»ã‚¹ä½“é¨“ã‚’æä¾›ã§ãã¾ã™ã€‚OIDCã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€AWSã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
OIDCã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã‚’å€‹åˆ¥ã«ç®¡ç†ã™ã‚‹å¿…è¦ãŒãªããªã‚Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨åˆ©ä¾¿æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚
ã‚„ã‚‹ã“ã¨ Terraformã§OIDCã‚’è¨­å®šã™ã‚‹æ–¹æ³• GitHub Bitbucket OIDCã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³• ã‚·ãƒ³ãƒ—ãƒ«ãªGitHub Actionsã¨Bitbucket Pipelinesã®ä½œæˆ æŠ€è¡“è¦ç´  OIDC AWS Bitbucket GitHub Terraform What is OIDC? OIDCï¼ˆOpenID Connectï¼‰ã¯ã€OAuth 2.0ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’æ‹¡å¼µã—ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã®ä»•çµ„ã¿ã‚’æä¾›ã™ã‚‹èªè¨¼ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚
Benefits of OIDC Gitã‹ã‚‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«OIDCã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã„ãã¤ã‹ã®åˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã«ã¯ã€Gitã‚’ä»‹ã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å‘ä¸Šã€ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ã®ç®¡ç†ã®å®¹æ˜“åŒ–ã€MFAãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ãªã„ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã®ä½¿ç”¨ã«é–¢é€£ã™ã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®å›é¿ãªã©ãŒã‚ã‚Šã¾ã™ã€‚ãŸã ã—ã€MFAãŒæœ‰åŠ¹åŒ–ã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†ãªã©ã®è¦ç´ ã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€è¤‡é›‘ãªå ´åˆãŒã‚ã‚Šã¾ã™ã€‚OIDCã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®èªè¨¼è³‡æ ¼æƒ…å ±ã‚’ä½¿ç”¨ã§ãã‚‹ãŸã‚ã€èªè¨¼æƒ…å ±ã®ç®¡ç†ãŒç°¡ç´ åŒ–ã•ã‚Œã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒå‘ä¸Šã—ã¾ã™ã€‚
æ§‹ç¯‰èƒŒæ™¯ ä»¥å‰ã¯ã€AWSã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¯æ‰‹é–“ãŒã‹ã‹ã‚‹ã‚‚ã®ã§ã—ãŸã€‚CLIã®ä»£ã‚ã‚Šã«ç®¡ç†ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã»ã©ã§ã™ã€‚
ä»¥å‰ã®ãƒ•ãƒ­ãƒ¼ã§ã¯ã€ã‚­ãƒ¼ã®å–å¾—ã«ä¸ä¾¿ã•ãŒä¼´ã„ã¾ã—ãŸï¼š ã‚¢ãƒ—ãƒªã‹ã‚‰MFAãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç¢ºèªã—ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ï¼š $ aws sts get-session-token &amp;ndash;serial-number arn:aws:iam::xxxxxx:mfa/xxxxxx &amp;ndash;token-code xxxxxx å–å¾—ã—ãŸã‚­ãƒ¼ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã‹ã€Gitã«ç™»éŒ²ã™ã‚‹ ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã‚‹ãŸã³ã«å®šæœŸçš„ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹&amp;hellip; Terraformã§OIDCã‚’æ§‹ç¯‰ã™ã‚‹ Terraformã§ã®æ§‹ç¯‰ GitHub Actionsã‚’ä½¿ç”¨ã™ã‚‹ã‚·ãƒŠãƒªã‚ªã¨Bitbucket Pipelinesã‚’ä½¿ç”¨ã™ã‚‹ã‚·ãƒŠãƒªã‚ªã®2ã¤ã‚’èª¬æ˜ã—ã¾ã™ã€‚ GitHub Sample variable &amp;#34;aws_account_id&amp;#34; {} variable &amp;#34;github_repo_name&amp;#34; {} variable &amp;#34;oidc_token_url&amp;#34; { default = &amp;#34;https://token.actions.githubusercontent.com&amp;#34; } data &amp;#34;tls_certificate&amp;#34; &amp;#34;github_oidc_token&amp;#34; { url = var.</description>
    </item>
    
    <item>
      <title>Lambdaãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ãƒ¡ãƒ¢ (SAM | LocalStack | TypeScript)</title>
      <link>https://h-neco.github.io/blog/aws-lambda-local-execution/</link>
      <pubDate>Mon, 24 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/aws-lambda-local-execution/</guid>
      <description>Intro PC ã®å…¥ã‚Œæ›¿ãˆã«ä¼´ã„ã€Lambda ã®ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œç’°å¢ƒã‚’å†æ§‹ç¯‰ã—ãŸã€‚ãƒ¡ãƒ¢ã¨ã—ã¦æ®‹ã—ã¦ãŠãã¾ã™ã€‚ PC ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹ã®ã¤ã„ã§ã« Lambda ã®ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œç’°å¢ƒã‚’å†æ§‹ç¯‰ã€‚ãƒ¡ãƒ¢ã¨ã—ã¦æ®‹ã—ã¦ãŠãã€‚
æŠ€è¡“è¦ç´  Volta Lambda LocalStack TypeScript SAM å‰ææ¡ä»¶ Installing Volta Volta ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Volta ã¯ Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ç‰¹åŒ–ã—ãŸãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ç•°ãªã‚‹ Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã€Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»ç®¡ç†ã™ã‚‹ã“ã¨ãªãã€ç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç°¡å˜ã«ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚Volta ã¯ã€ä»–ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ„ãƒ¼ãƒ«ã¨æ¯”è¼ƒã—ã¦åˆ‡ã‚Šæ›¿ãˆãŒç°¡å˜ã¨ã„ã†åˆ©ç‚¹ãŒã‚ã‚Šã€OS ã‚„ã‚·ã‚§ãƒ«ã«ä¾å­˜ã—ãªã„ãŸã‚æ§˜ã€…ãªç’°å¢ƒã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
$ curl https://get.volta.sh | bash $ echo &amp;#39;export VOLTA_HOME=&amp;#34;$HOME/.volta&amp;#34;&amp;#39; &amp;gt;&amp;gt; .zshrc $ echo &amp;#39;export PATH=&amp;#34;$VOLTA_HOME/bin:$PATH&amp;#34;&amp;#39; &amp;gt;&amp;gt; .zshrc Node.js ã¨ Yarn ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€volta list node ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„å ´åˆã¯ã€volta install node@18.15.0 ã¨ã„ã†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚
$ volta install node success: installed and set node@18.15.0 (with npm@9.5.0) as default $ volta install yarn success: installed and set yarn@4.</description>
    </item>
    
    <item>
      <title>Terraformã®Wrapperãƒ„ãƒ¼ãƒ«ã€Terragruntå°å…¥ã®æ¤œè¨¼ã‚’è¡Œã„ã¾ã—ãŸã€‚</title>
      <link>https://h-neco.github.io/blog/cicd-terragrunt-1/</link>
      <pubDate>Sat, 22 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/cicd-terragrunt-1/</guid>
      <description>Intro Terraformã®Wrapperãƒ„ãƒ¼ãƒ«ã€Terragruntå°å…¥ã®æ¤œè¨¼ã‚’è¡Œã„ã¾ã—ãŸã€‚ å°å…¥ã®æ¤œè¨¼ é€šå¸¸ã€ç§ã¯Terraformã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€æ¬¡ã®ã‚ˆã†ãªä¸ä¾¿ã•ãŒã‚ã‚Šã¾ã—ãŸï¼š å„ãƒ‡ãƒ—ãƒ­ã‚¤ã®å½±éŸ¿ç¯„å›²ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ãŸã‚ã«ã€Gitãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚ˆã‚Šå°ã•ãªã‚‚ã®ã«åˆ†å‰²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚Terraformã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ãŒé¢å€’ã§ã—ãŸã€‚ ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹ã®ä¾å­˜é–¢ä¿‚ã‚’ç†è§£ã™ã‚‹ã®ãŒé›£ã—ã‹ã£ãŸã§ã™ã€‚ depends_onãŒæ˜ç¤ºçš„ã«ä½¿ç”¨ã§ããªã„å ´æ‰€ã§ãƒ‡ãƒ—ãƒ­ã‚¤é †åºã«æ³¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚ å°å…¥å¾Œã®èª²é¡Œ å°å…¥ã«é–¢ã—ã¦ã€ä»¥ä¸‹ã®2ç‚¹ã«ã¤ã„ã¦æ¤œè¨¼ãŒä¿ç•™ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã—è©³ã—ã„æ–¹ãŒã„ãŸã‚‰ç›¸è«‡ã«ä¹—ã£ã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚ Terraformã®ç®¡ç†ã ã‘ã§ãªãã€Terragruntã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚‚è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ã©ã®ã‚ˆã†ã«å¤‰ã‚ã‚‹ã®ã‹ ã‚‚ã—Terragruntã®é–‹ç™ºãŒåœæ­¢ã—ãŸå ´åˆã€ã‚¹ãƒ ãƒ¼ã‚ºã«Terraformã®ã‚³ãƒ¼ãƒ‰ã«æˆ»ã›ã‚‹ã‹ æŠ€è¡“è¦ç´  terraform terragrunt aws Terragruntã¨ã¯ Terragruntã¯ã€Terraformã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ä½œæ¥­ã‚’ç°¡ç´ åŒ–ã™ã‚‹ãŸã‚ã®Terraform Wrapperã¨ã—ã¦çŸ¥ã‚‰ã‚Œã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Terragruntã¯TerraformãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ã‚’æ‹¡å¼µã—ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨ã€æŸ”è»Ÿãªæ§‹æˆã€å†åˆ©ç”¨æ€§ã®å‘ä¸Šã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ç‰¹ã«ã€Terraformã‚’ä½¿ç”¨ã—ã¦è¤‡æ•°ã®ç’°å¢ƒã‚„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç®¡ç†ã™ã‚‹éš›ã«Terragruntã¯éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« $ brew install tfenv # Installs Terraform (version specified in .terraform-version) $ brew install tgenv # Installs Terragrunt (version specified in .terragrunt-version) ###ã€€ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ
ã“ã®ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã¯ã€ä»–ã®è¨˜äº‹ã‚’å‚è€ƒã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚ã“ã®æ§‹é€ ã®åˆ©ç‚¹ã¯ã€å„ç’°å¢ƒã”ã¨ã«ç•°ãªã‚‹å¤‰æ•°ã‚’æŒ‡å®šã§ãã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ€§ãŒå‘ä¸Šã™ã‚‹ã“ã¨ã§ã™ã€‚
$ tree . . â”œâ”€â”€ README.md â”œâ”€â”€ docs â”‚ â””â”€â”€ graph-dependencies.png â”œâ”€â”€ envs â”‚ â”œâ”€â”€ prod â”‚ â”‚ â”œâ”€â”€ ResourceGroupA â”‚ â”‚ â”‚ â””â”€â”€ terragrunt.hcl â”‚ â”‚ â”œâ”€â”€ ResourceGroupB â”‚ â”‚ â”‚ â””â”€â”€ terragrunt.</description>
    </item>
    
    <item>
      <title>Packerã¨Ansibleã‚’ä½¿ç”¨ã—ã¦Amazon Linux 2ã«NATã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚</title>
      <link>https://h-neco.github.io/blog/aws-ec2-nat-instance/</link>
      <pubDate>Tue, 11 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/aws-ec2-nat-instance/</guid>
      <description>Intro AmazonLinux2ã‚’ä½¿ç”¨ã—ã¦NATã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¨­å®šã—ã¾ã—ãŸã€‚æ§‹æˆãƒ—ãƒ­ã‚»ã‚¹ã«Packerã¨Ansibleã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚
AmazonLinux2ã‚’ä½¿ç”¨ã—ã¦NATã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¨­å®šã—ã¾ã™ã€‚ Amazonlinux2ãŒé¸æŠã™ã‚‹ç†ç”± Lambdaã¯å¤–éƒ¨ã‹ã‚‰é–‹å§‹ã•ã‚Œã‚‹ç€ä¿¡æ¥ç¶šã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãŸã‚ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§FTPã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã›ã‚“ã€‚ ECSã¯ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®é™çš„å‰²ã‚Šå½“ã¦ã‚’è¨±å¯ã—ã¦ã„ã¾ã›ã‚“ã€‚ Gatewayã‚¿ã‚¤ãƒ—ã§ã‚ã‚‹ãŸã‚ã€NATãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§é™çš„å‰²ã‚Šå½“ã¦ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ãŒã€å¤–éƒ¨ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ç€ä¿¡æ¥ç¶šã‚’å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ æŠ€è¡“è¦ç´  Packer Ansible iptables CENTOS7ï¼ˆAmazonLinux2ï¼‰ã§ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã§ã™ã€‚ãŸã ã—ã€IPTablesã‚’ç´¹ä»‹ã—ã¦ã€NATã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€  $ tree . . â”œâ”€â”€ ansible.cfg â”œâ”€â”€ bin â”‚Â â””â”€â”€ init.sh â”œâ”€â”€ inventory â”‚Â â””â”€â”€ hosts â”œâ”€â”€ packer-template â”‚Â â””â”€â”€ nat_instance.json â”œâ”€â”€ playbook â”‚Â â””â”€â”€ setup.yml â””â”€â”€ roles â””â”€â”€ iptable â””â”€â”€ tasks â”œâ”€â”€ main.yml â””â”€â”€ templates â”œâ”€â”€ iptables-config.j2 â”œâ”€â”€ nat_cidr.j2 â””â”€â”€ sysctl.conf Packerã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿè¡Œ Execution Command packer build packer-template/nat_instance.json . â””â”€â”€ packer-template â””â”€â”€ nat_instance.json { &amp;#34;variables&amp;#34;: { &amp;#34;aws_access_key&amp;#34;: &amp;#34;{{env `AWS_ACCESS_KEY`}}&amp;#34;, &amp;#34;aws_secret_key&amp;#34;: &amp;#34;{{env `AWS_SECRET_KEY`}}&amp;#34; }, &amp;#34;builders&amp;#34;: [ { &amp;#34;type&amp;#34;: &amp;#34;amazon-ebs&amp;#34;, &amp;#34;access_key&amp;#34;: &amp;#34;{{user `aws_access_key`}}&amp;#34;, &amp;#34;secret_key&amp;#34;: &amp;#34;{{user `aws_secret_key`}}&amp;#34;, &amp;#34;region&amp;#34;: &amp;#34;ap-northeast-1&amp;#34;, &amp;#34;ami_regions&amp;#34;: [ &amp;#34;ap-northeast-1&amp;#34; ], &amp;#34;associate_public_ip_address&amp;#34;: true, &amp;#34;source_ami&amp;#34;: &amp;#34;ami-0a3d21ec6281df8cb&amp;#34;, &amp;#34;instance_type&amp;#34;: &amp;#34;t3.</description>
    </item>
    
    <item>
      <title>ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’Selenium(ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶)ã§å–å¾—ã™ã‚‹</title>
      <link>https://h-neco.github.io/blog/browser-selenium/</link>
      <pubDate>Wed, 26 Aug 2020 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/browser-selenium/</guid>
      <description>èƒŒæ™¯ NFSã‹ã‚‰s3ã¸ãƒ‡ãƒ¼ã‚¿ã‚’ç§»è¡Œã—ã¦WEBãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã‚ˆã†ã«åŸºç›¤ç§»è¡Œã‚’è¡Œã£ãŸéš›ã€404ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå¤šæ•°ç™ºç”Ÿã—ã¦ã„ãŸã€‚ ã¾ãŸã€s3ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåãƒ»ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹åã«ã¯ç¦å‰‡æ–‡å­—ã¨ã„ã†ã‚‚ã®ãŒå­˜åœ¨ã™ã‚‹ã†ã‚‰ã—ã„ã€‚ ä½•ãŒå¯¾è±¡ãªã®ã‹åˆ¤æ–­ã™ã‚‹ãŸã‚ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚
å‹•ä½œç’°å¢ƒ ç’°å¢ƒãƒ»ãƒ„ãƒ¼ãƒ«
$ sw_vers ProductName: Mac OS X ProductVersion: 10.15.2 BuildVersion: 19C57 $ python3 -V Python 3.7.3z $ pip3 list | grep -e chrome -e selenium chromedriver-binary 83.0.4103.39.0 selenium 3.141.0 installæ‰‹é †
$ sudo pip3 install selenium $ sudo pip3 install chromedriver-binary==83.0.4103.39.0 æŠ€è¡“è¦ç´  selenium web driver python ec2 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ ./log/ (ãƒ­ã‚°å‡ºåŠ›å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª) ./config.ini (è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«) ./grep.py (å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«) ./url.txt (æ¤œç´¢å¯¾è±¡ã®URLãƒªã‚¹ãƒˆ) å®Ÿè¡Œæº–å‚™ ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°å¯¾è±¡ã®URLã‚’è¨˜è¼‰ã™ã‚‹ $ vi url.txt http://user:password@google.com/ http://www.google.com/ ... configãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½® $ vi config.</description>
    </item>
    
    <item>
      <title>BOSH release for Bamboo &amp; Remote Agents</title>
      <link>https://h-neco.github.io/projects/creations/bosh-agents/</link>
      <pubDate>Sun, 11 Feb 2018 12:41:05 -0500</pubDate>
      
      <guid>https://h-neco.github.io/projects/creations/bosh-agents/</guid>
      <description>BOSH (Bosh Outer SHell) &amp;ldquo;&amp;hellip; is an open source tool for release engineering, deployment, lifecycle management, and monitoring of distributed systems.&amp;rdquo; And it&amp;rsquo;s amazingly powerful. This examples uses BOSH to provision an Alassian vendor app running on JDK along with the support Postgres database and agents to support it.Â The releases manages the health of services and will automatically provision, start/stop processes across the various services.</description>
    </item>
    
    <item>
      <title>Atlassian Marketplace Plugins</title>
      <link>https://h-neco.github.io/projects/creations/marketplace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/projects/creations/marketplace/</guid>
      <description>Multiple plugins used by thousands of teams that provide enhanced functionality of Atlassianâ€™s core products (primarily JIRA and Bamboo) to enrich CI/CD capabilities, DevOps automation, or productivity. Functionality spans user interface, web services and persistence.</description>
    </item>
    
    <item>
      <title>Docker image for Bitbucket CI/CD PipelinesÂ  &#34;shipit&#34;</title>
      <link>https://h-neco.github.io/projects/creations/docker-marketplace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/projects/creations/docker-marketplace/</guid>
      <description>Provides required dependencies and additional utilities to simplify and codify the process of building, testing and delivering Atlassian plugins all the way to the live marketplace. Executes integration/AUT level tests against all stated compatible versions for the productUploads generated artifact to Atlassian marketplaceProvides corresponding metadata indicating version, release notes, and compatibility</description>
    </item>
    
    <item>
      <title>List</title>
      <link>https://h-neco.github.io/blog/list/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/blog/list/</guid>
      <description>devops multipass ã§ ãƒ­ãƒ¼ã‚«ãƒ« docker ç’°å¢ƒã®æ§‹ç¯‰ 2024-03-20 Docker ã‹ã‚‰ Terraform ã‚’å®Ÿè¡Œã™ã‚‹ 2023-07-10 Codebuild æ§‹ç¯‰ã¨ Deploy ãƒ•ãƒ­ãƒ¼ã®æ•´å‚™ 2023-06-27 Terraform ã®ãƒ©ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ã€Terragrunt ã®å°å…¥æ¤œè¨¼ã‚’è¡Œã£ã¦ã¿ãŸ 2023-04-27 OIDC (Git to AWS)ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ¢ 2023-04-26 aws CloudFrontFunction ã¨ LambdaEdge ã®é•ã„ 2023-07-21 EFS ãƒãƒ¼ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¯æ¸‡å¯¾ç­–ãƒ¡ãƒ¢ 2023-05-03 AWS CLI ã‚’ä½¿ã£ãŸ EC2 ã¸ã® EBS ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®æ°¸ç¶šåŒ– 2023-05-01 Lambda ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ãƒ¡ãƒ¢ (SAM | LocalStack | TypeScript) 2023-04-24 Packer ã¨ Ansible ã‚’ä½¿ã£ã¦ Amazon Linux 2 ã« NAT ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ 2023-04-11 security Trivy ã‚’ç”¨ã„ãŸã‚³ãƒ³ãƒ†ãƒŠ Image,DockerFile ã¸ã®è„†å¼±æ€§è¨ºæ–­ 2024-03-21 ãã®ä»– ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ Selenium(ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶)ã§å–å¾—ã™ã‚‹ 2020-08-26 chatgpt+mermaid ã§ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’ä½œæˆã™ã‚‹ 2024-02-21 </description>
    </item>
    
    <item>
      <title>Search Results</title>
      <link>https://h-neco.github.io/search/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://h-neco.github.io/search/</guid>
      <description>This file exists solely to respond to /search URL with the related search layout template.
No content shown here is rendered, all content is based in the template layouts/page/search.html
Setting a very low sitemap priority will tell search engines this is not important content.
This implementation uses Fusejs, jquery and mark.js
Initial setup Search depends on additional output content type of JSON in config.toml
[outputs] home = [&amp;#34;HTML&amp;#34;, &amp;#34;JSON&amp;#34;] Searching additional fileds To search additional fields defined in front matter, you must add it in 2 places.</description>
    </item>
    
  </channel>
</rss>
