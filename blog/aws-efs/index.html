<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>profile | EFS Burst Mode Credit Exhaustion Countermeasures Memo.</title>
  <meta name="description" content="">

  
  
    <meta property="og:image" content="https://h-neco.github.io/img/profile.png" />
    <meta property="og:title" content="profile | EFS Burst Mode Credit Exhaustion Countermeasures Memo." />   
  
  <meta property="og:description" content="" />
  <meta name="author" content="h neco">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900&display=swap"></noscript>
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
      <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&display=swap"></noscript>
  <link rel="preload" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css"></noscript>
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/devicons/1.8.0/css/devicons.min.css" integrity="sha512-JW3fT0YTK7pT7w437SoX6GcW76jOZ6E0jGmrqBAcloC4GKT+njHOY4fX5KxJ9WfIXTkNrAF994525fAHp+KCxg==" crossorigin="anonymous" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/devicons/1.8.0/css/devicons.min.css" integrity="sha512-JW3fT0YTK7pT7w437SoX6GcW76jOZ6E0jGmrqBAcloC4GKT+njHOY4fX5KxJ9WfIXTkNrAF994525fAHp+KCxg==" crossorigin="anonymous"></noscript>
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css" integrity="sha512-QKC1UZ/ZHNgFzVKSAhV5v5j73eeL9EEN289eKAEFaAjgAiobVAnVv/AGuPbXsKl1dNoel3kNr6PYnSiTzVVBCw==" crossorigin="anonymous" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css" integrity="sha512-QKC1UZ/ZHNgFzVKSAhV5v5j73eeL9EEN289eKAEFaAjgAiobVAnVv/AGuPbXsKl1dNoel3kNr6PYnSiTzVVBCw==" crossorigin="anonymous"></noscript>
  
  <link rel="preload" href="https://h-neco.github.io/css/resume.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://h-neco.github.io/css/resume.css"></noscript>
  <link rel="preload" href="https://h-neco.github.io/css/tweaks.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://h-neco.github.io/css/tweaks.css"></noscript>
  <link rel="preload" href="https://h-neco.github.io/css/resume-override.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://h-neco.github.io/css/resume-override.css"></noscript>
  <meta name="generator" content="Hugo 0.111.3">
  
   
  
</head>
<body id="page-top">
  <nav class="navbar navbar-expand-lg navbar-dark bg-profile fixed-top" id="sideNav">
  <a class="navbar-brand js-scroll-trigger" href="#page-top">
    <span class="d-block d-lg-none">h neco</span>
    <span class="d-none d-lg-block">
      <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="/img/profile.png" alt="">
    </span>
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link js-scroll-trigger" href="/#about">About</a>
      </li>
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#skills">Skills</a>
          </li>
      
      
      
      
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#experience">Experience</a>
          </li>
      
      
      
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="/#blog">Blog</a>
          </li>
      
    </ul>
  </div>
</nav>

  <div class="container-fluid p-0">
    
<nav aria-label="breadcrumb">
  <ol  class="breadcrumb">
    





<li class="breadcrumb-item">
  <a href="https://h-neco.github.io/">Home</a>
</li>


<li class="breadcrumb-item">
  <a href="https://h-neco.github.io/blog/">Blog</a>
</li>


<li class="breadcrumb-item active">
  <a href="https://h-neco.github.io/blog/aws-efs/">EFS Burst Mode Credit Exhaustion Countermeasures Memo.</a>
</li>

  </ol>
</nav>




<section class="resume-section p-3 p-lg-5 d-flex flex-column">
  <div class="my-auto">
  	<div class="mb-3 d-flex flex-row justify-content-between">
    	<h2 class="mb-0"><span class="text-primary">EFS Burst Mode Credit Exhaustion Countermeasures Memo.</span></h2>
    	<span class="">May 3, 2023</span>
    </div>
    <div>
    	<h2 id="intro">Intro</h2>
<ul>
<li>EFS Burst Mode Credit Exhaustion Countermeasures Memo.
<ul>
<li>I will provide the countermeasures I took as a memo since I was using EFS in burst mode and my credits were running low.</li>
</ul>
</li>
</ul>
<h2 id="technical-elements">Technical Elements</h2>
<ul>
<li>EFS</li>
<li>aws</li>
</ul>
<h2 id="two-modes-of-efs">Two Modes of EFS</h2>
<ul>
<li>
<p>EFS has two modes: Burst Mode (General Purpose) and Provisioned Mode.</p>
</li>
<li>
<p>Burst Mode automatically adjusts the traffic based on the amount of storage used and can handle temporary increases in traffic. The burstable bandwidth varies based on traffic usage and allows bursts as low as 105 Mbps. However, there is a limit on the number of read/write requests per second, so exceeding the limit may result in decreased throughput.</p>
</li>
<li>
<p>Provisioned Mode allows you to set the volume&rsquo;s throughput, minimum/maximum/burst, and specify write throughput. The read throughput is three times the write throughput. While Provisioned Mode does not have automatic scaling based on traffic, it can accommodate the required traffic based on the throughput settings.</p>
</li>
</ul>
<h2 id="notes-and-countermeasures-for-burst-mode-general-purpose">Notes and Countermeasures for Burst Mode (General Purpose)</h2>
<p><!-- raw HTML omitted -->Note 1<!-- raw HTML omitted -->: Burst Credits</p>
<ul>
<li>Burst Mode consumes credits accumulated from file read/write operations and replenishes the credits based on the data usage on the NAS. The minimum speed of Burst Mode is 105 Mbps. However, when burst credits are exhausted, the performance of throughput significantly decreases, and file references from the mounting system may time out.</li>
<li>How to check:
<ul>
<li>Metric Name: BurstCreditBalance</li>
</ul>
</li>
<li>Initially, 2.3T credits are provided.</li>
<li>To avoid exhausting burst credits, you can take the following countermeasures:
<ul>
<li>Place a large amount of data to accelerate credit recovery.</li>
<li>Switch to Provisioned Mode to ensure a constant throughput.</li>
<li>Utilize caching mechanisms like CloudFront.</li>
</ul>
</li>
</ul>
<p><!-- raw HTML omitted -->Note 2<!-- raw HTML omitted -->: Request Limits</p>
<ul>
<li>Burst Mode has limits on the number of requests.
<ul>
<li>There is a maximum limit on IOPS, which is 35,000 for reads and 7,000 for writes.
<ul>
<li>If the maximum IOPS in Burst Mode is exceeded, the performance of throughput decreases. Therefore, if you require high IOPS, consider using Provisioned Mode.</li>
</ul>
</li>
<li>How to check:
<ul>
<li>Metric Name: PercentIOLimit</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="countermeasures-taken-based-on-consideration">Countermeasures Taken Based on Consideration</h2>
<ul>
<li>
<p>I adopted a strategy of placing a large amount of data in Burst Mode to accelerate the credit recovery speed.</p>
<ul>
<li>Attempting to place a 10GB file.
<ul>
<li>Cost: $3/month</li>
</ul>
</li>
<li>Command:
<ul>
<li><code>$ dd if=/dev/zero of=10GB_file_1 bs=10240k count=1000</code></li>
</ul>
</li>
<li>How to check:
<ul>
<li>Metric Name: BurstCreditBalance</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Provisioned Mode is not used due to high cost.</p>
<ul>
<li>Throughput 33(Mib/s) / Max Read Throughput 99(Mib/s)
<ul>
<li>Cost: $238/month</li>
</ul>
</li>
<li>Throughput 15(Mib/s) / Max Read Throughput 45(Mib/s)
<ul>
<li>Cost: $108/month</li>
</ul>
</li>
<li>Throughput 5(Mib/s) / Max Read Throughput 15(Mib/s)
<ul>
<li>Cost: $36/month</li>
</ul>
</li>
</ul>
</li>
</ul>

	    
	</div>
    <div>
    	
    </div>
    <ul class="tags">
    
</ul>

  </div>
</section>

    <section><span style="color: #999999;">Nifty <a href="https://codepen.io/wbeeftink/pen/dIaDH">tech tag lists</a> fromÂ <a class="pen-owner-link" href="https://codepen.io/wbeeftink">Wouter Beeftink</a> </span>
      
    </section>
  </div>
  
  <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js" integrity="sha512-0QbL0ph8Tc8g5bLhfVzSqxe9GERORsKhIn1IrpxDAgUsbBGz/V7iSav2zzW325XGd1OMLdL4UiqRJj702IeqnQ==" crossorigin="anonymous"></script>
  
  <script async src="/js/resume.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z6BYZ5M6VX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-Z6BYZ5M6VX');
  </script>
  

  
</body>
</html>
